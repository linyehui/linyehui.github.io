<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"linyehui.me","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="HABIT IS POWER">
<meta property="og:type" content="website">
<meta property="og:title" content="HABIT IS POWER">
<meta property="og:url" content="http://linyehui.me/page/5/index.html">
<meta property="og:site_name" content="HABIT IS POWER">
<meta property="og:description" content="HABIT IS POWER">
<meta property="og:locale">
<meta property="article:author" content="linyehui">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://linyehui.me/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>HABIT IS POWER</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">HABIT IS POWER</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">习惯就是力量</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2015/2015-03-18-debug-spidermonkey-with-cocos2d-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2015/2015-03-18-debug-spidermonkey-with-cocos2d-js/" class="post-title-link" itemprop="url">cocos2d-js调试Spidermonkey代码</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>cocos2d-js-3.1中的spidermonkey是直接以头文件+.a文件的方式整合的，但是有些代码会crash在spidermonkey的代码中，所以我需要调试spidermonkey的C++代码。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><h3 id="寻找cocos2d-js-3-1使用的spidermonkey版本"><a href="#寻找cocos2d-js-3-1使用的spidermonkey版本" class="headerlink" title="寻找cocos2d-js-3.1使用的spidermonkey版本"></a>寻找cocos2d-js-3.1使用的spidermonkey版本</h3><h4 id="尝试1，v23版本"><a href="#尝试1，v23版本" class="headerlink" title="尝试1，v23版本"></a>尝试1，v23版本</h4><p>版本 v23，看当前使用的版本，一开始的想法是查看本地cocos2d-x目录下的CHANGELOG，我看到的最新的是：  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cocos2d-x-3.0alpha0 @Sep.19 2013</span><br><span class="line">Upgraded SpiderMonkey to Firefox v23</span><br></pre></td></tr></table></figure>

<p>而spidermonker目录下的README告诉我们需要去这个github仓库取代码  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.\frameworks\js-bindings\external\spidermonkey\README.md</span><br><span class="line">https://github.com/ricardoquesada/Spidermonkey</span><br></pre></td></tr></table></figure>

<p>找了下v23的log，发下没有release，所以只能从特定的commit下载zip包下来</p>
<p><a target="_blank" rel="noopener" href="https://github.com/ricardoquesada/Spidermonkey/tree/c8f78c30b633025f48fc0075e5f9a706639c7ac4">https://github.com/ricardoquesada/Spidermonkey/tree/c8f78c30b633025f48fc0075e5f9a706639c7ac4</a></p>
<h5 id="结论：编译后发现版本不对，头文件不对"><a href="#结论：编译后发现版本不对，头文件不对" class="headerlink" title="结论：编译后发现版本不对，头文件不对"></a>结论：编译后发现版本不对，头文件不对</h5><h4 id="尝试2，v28版本"><a href="#尝试2，v28版本" class="headerlink" title="尝试2，v28版本"></a>尝试2，v28版本</h4><p>本地的CHANGELOG不对，那么就看下在线版本的；  </p>
<p>我们的cocos2d-js版本是3.1对应到在线的CHANGELOG，其中的Spidermonkey版本是v28  </p>
<p><a target="_blank" rel="noopener" href="https://github.com/cocos2d/cocos2d-js/blob/develop/CHANGELOG">https://github.com/cocos2d/cocos2d-js/blob/develop/CHANGELOG</a></p>
<p>同样的还是没有release版本，所以还是到对应的commit页面下载  </p>
<p><a target="_blank" rel="noopener" href="https://github.com/ricardoquesada/Spidermonkey/tree/90747bc0ccb8e9fa1d56ef7e9c1b8b7b1bee4c96">https://github.com/ricardoquesada/Spidermonkey/tree/90747bc0ccb8e9fa1d56ef7e9c1b8b7b1bee4c96</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Cocos2d-JS-v3.0 beta @ May.23, 2014</span><br><span class="line">[JSB]Upgraded SpiderMonkey to v28.</span><br><span class="line"></span><br><span class="line">Cocos2d-JS-v3.0 alpha2 @ April.14, 2014</span><br><span class="line">[JSB]Update precompiled SpiderMonkey to support iOS 64 bit devices.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ricardoquesada authored on 25 Apr 2014</span><br><span class="line">Merge pull request #28 from pandamicro/v28 …</span><br><span class="line">[v28] Upgrade to Spidermonkey v28</span><br></pre></td></tr></table></figure>

<h5 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h5><p>进入js&#x2F;src&#x2F;build-android，执行.&#x2F;build.sh -r<br>对比生成的apidermonkey-android中的include文件和cocos2d-js目录下的文件，一致，看来应该是这个版本了</p>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>cocos2d-js-3.1 使用的spidermonkey版本是v28，可以从这里下载到:<br><a target="_blank" rel="noopener" href="https://github.com/ricardoquesada/Spidermonkey/tree/90747bc0ccb8e9fa1d56ef7e9c1b8b7b1bee4c96">https://github.com/ricardoquesada/Spidermonkey/tree/90747bc0ccb8e9fa1d56ef7e9c1b8b7b1bee4c96</a></p>
<p>进入js&#x2F;src&#x2F;build-android目录下执行.&#x2F;build.sh -r后将生成的三个目录覆盖到工程目录就可以调试了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2015/2015-03-18-sdk-manager-crash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2015/2015-03-18-sdk-manager-crash/" class="post-title-link" itemprop="url">Windows下的SDK Manager.exe闪退</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>双击SDK Manager.exe，闪退；  </p>
<p>网上找了下资料，SDK Manager.exe启动其实调用的是android.bat这个批处理，而闪退的直接原因就是find_java.bat执行没有获取到正确的java.exe路径</p>
<h3 id="问题根源"><a href="#问题根源" class="headerlink" title="问题根源"></a>问题根源</h3><p>问题的根源在于android.bat中的这一段脚本执行出错了，没有获取到正确的java.exe路径  </p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">rem Check we have a valid Java.exe in the path.</span></span><br><span class="line"><span class="built_in">set</span> java_exe=</span><br><span class="line"><span class="keyword">call</span> lib\find_java.bat</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">defined</span> java_exe <span class="keyword">goto</span> :EOF</span><br></pre></td></tr></table></figure>

<p>其实问题最终的根源在于find_java.bat中调用的find_java.exe没有返回正确的路径</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="简单粗暴的解决方案"><a href="#简单粗暴的解决方案" class="headerlink" title="简单粗暴的解决方案"></a>简单粗暴的解决方案</h3><ul>
<li><p>简单的改法就是修改Android.bat中的java_exe路径，直接写死；  </p>
</li>
<li><p>当然这是个非常粗暴的解决方案，方案的风险在于：下次你复制这个目录到别的电脑上使用的时候，这里设置的路径需要重新设置。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set java_exe=C:\Program Files\Java\jdk1.7.0_40\bin\java.exe</span><br></pre></td></tr></table></figure>

<h3 id="正确的解决方案"><a href="#正确的解决方案" class="headerlink" title="正确的解决方案"></a>正确的解决方案</h3><p>其实这个更简单，在系统环境变量中，添加一个JAVA_HOME的变量定义  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME</span><br><span class="line">C:\Program Files\Java\jdk1.7.0_40</span><br></pre></td></tr></table></figure>

<h4 id="验证的方法"><a href="#验证的方法" class="headerlink" title="验证的方法"></a>验证的方法</h4><p>直接调用下find_java.exe看看能否返回正确的路径。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="http://blog.csdn.net/puma004/article/details/11392271">64位win7下Android SDK Manager闪退的解决方法</a>  </p>
<p><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_6e1ad0cf01013v9u.html">解决64位Win7下的android sdk manager一闪而过的问题</a>  </p>
<p><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_8a2d5e270101ad3q.html">安装Android SDK时，点击SDK Manager.exe闪退</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-07-05-make-cocos2dx-samples-as-static-libraries/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-07-05-make-cocos2dx-samples-as-static-libraries/" class="post-title-link" itemprop="url">把cocos2dx的Sample工程改成Static Library</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h1><ol>
<li>我们的产品分为大厅和游戏两大模块，大厅使用iOS或Android SDK直接开发，游戏内嵌在大厅中，但是使用cocos2dx开发；</li>
<li>我们希望把大厅和游戏从project上分开来，省的代码缴在一起编译，看着都恶心</li>
<li>Andoird下已经实现上述需求，大厅使用SDK开发，游戏作为Library提供给大厅直接调用</li>
<li>现在我们需要把iOS下的cocos2dx工程也改造成一个Library提供给大厅调用。</li>
</ol>
<h1 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h1><p>Mac下已经配置好了cocos2dx的开发环境，Sample中的HelloCpp工程可以在Xcode下成功编译并运行</p>
<h1 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h1><h3 id="1-把HelloCpp工程从Cocos2dx目录下复制出来"><a href="#1-把HelloCpp工程从Cocos2dx目录下复制出来" class="headerlink" title="1. 把HelloCpp工程从Cocos2dx目录下复制出来"></a>1. 把HelloCpp工程从Cocos2dx目录下复制出来</h3><h4 id="问题：复制出来后会提示cocos2d-h文件找不到"><a href="#问题：复制出来后会提示cocos2d-h文件找不到" class="headerlink" title="问题：复制出来后会提示cocos2d.h文件找不到"></a>问题：复制出来后会提示cocos2d.h文件找不到</h4><h5 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h5><p>原因是Sample工程设置的include路径是按照工程再cocos自己的目录下来设置的，把工程复制出来后路径就变了</p>
<h5 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h5><ol>
<li><p>先添加一个SourceTrees变量</p>
<blockquote>
<p>Perferences-&gt;Locatons-&gt;Source Trees<br>添加一个COCOS2DX_HOME变量，并把path设置成本机的cocos2dx根目录</p>
</blockquote>
</li>
<li><p>修改工程Targets中的Header Search Paths</p>
<blockquote>
<p>点击工程-&gt;Targets-&gt;HelloCpp-&gt;Build Settings-&gt;Search Paths-&gt;Header Search Paths<br>把值修改成这个：</p>
</blockquote>
<p> “$(SDKROOT)&#x2F;usr&#x2F;include&#x2F;libxml2&#x2F;“ “$(COCOS2DX_HOME)&#x2F;cocos2dx&#x2F;include” “$(COCOS2DX_HOME)&#x2F;cocos2dx” “$(COCOS2DX_HOME)&#x2F;cocos2dx&#x2F;platform&#x2F;ios” “$(COCOS2DX_HOME)&#x2F;cocos2dx&#x2F;kazmath&#x2F;include” “$(COCOS2DX_HOME)&#x2F;external&#x2F;chipmunk&#x2F;include&#x2F;chipmunk”</p>
</li>
<li><p>Clean工程，然后再次Build，成功</p>
</li>
</ol>
<h3 id="2-iOS工程启动先进入UIView，再跳转到Cocos2d场景，并可以跳转回来"><a href="#2-iOS工程启动先进入UIView，再跳转到Cocos2d场景，并可以跳转回来" class="headerlink" title="2. iOS工程启动先进入UIView，再跳转到Cocos2d场景，并可以跳转回来"></a>2. iOS工程启动先进入UIView，再跳转到Cocos2d场景，并可以跳转回来</h3><h4 id="先把HelloCpp工程调整成这样"><a href="#先把HelloCpp工程调整成这样" class="headerlink" title="先把HelloCpp工程调整成这样"></a>先把HelloCpp工程调整成这样</h4><p>发现这个文章做了我想做的事情的一部分：<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/crayondeng/article/details/16828555">Cocos2d-x UIView和Coco2d-x场景之间的相互跳转切换</a></p>
<p><a target="_blank" rel="noopener" href="http://www.raywenderlich.com/zh-hans/24764/%E5%A6%82%E4%BD%95%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8cocos2d%E5%92%8Cuikit-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86">如何结合使用Cocos2d和UIKit 第一部分</a></p>
<h3 id="3-新增HelloCpp-Target：Static-Library"><a href="#3-新增HelloCpp-Target：Static-Library" class="headerlink" title="3. 新增HelloCpp Target：Static Library"></a>3. 新增HelloCpp Target：Static Library</h3><p>在Library的Target中有几个点需要参考默认Target的配置：</p>
<ol>
<li><p>不使用ARC</p>
<blockquote>
<p>Object-C Automatic Reference Counting —–&gt; NO</p>
</blockquote>
</li>
<li><p>Search Path，直接复制默认Target的配置即可</p>
<p> “$(SDKROOT)&#x2F;usr&#x2F;include&#x2F;libxml2&#x2F;“ “$(COCOS2DX_HOME)&#x2F;cocos2dx&#x2F;include” “$(COCOS2DX_HOME)&#x2F;cocos2dx” “$(COCOS2DX_HOME)&#x2F;cocos2dx&#x2F;platform&#x2F;ios” “$(COCOS2DX_HOME)&#x2F;cocos2dx&#x2F;kazmath&#x2F;include” “$(COCOS2DX_HOME)&#x2F;external&#x2F;chipmunk&#x2F;include&#x2F;chipmunk”</p>
</li>
<li><p>修改预编译宏定义 Preprocessor Macros，也是直接复制默认的Target配置就可以了</p>
<blockquote>
<p>USE_FILE32API CC_TARGET_OS_IPHONE COCOS2D_DEBUG&#x3D;1<br>USE_FILE32API CC_TARGET_OS_IPHONE</p>
</blockquote>
</li>
<li><p>添加对libcocos2dx.a的依赖</p>
<blockquote>
<p>Build Phases-&gt;Link Binary With Libraries</p>
</blockquote>
</li>
<li><p>新的Target配置成功后会编译出.a文件</p>
</li>
</ol>
<h3 id="4-新增工程GamesHall用于调用library"><a href="#4-新增工程GamesHall用于调用library" class="headerlink" title="4. 新增工程GamesHall用于调用library"></a>4. 新增工程GamesHall用于调用library</h3><ul>
<li>把HelloCpp工程添加到GamesHall下</li>
<li>在Target中添加对libhellocpp.a的依赖</li>
<li>不添加任何代码，编译工程，可以运行</li>
<li>如果不能运行要按照错误提示进行修改，很有可能是libhellocpp.a没有编译出来，那就要检查下上面的步骤，看新增的Static Library的Target是不是配置的有问题</li>
<li>配置正确的话，GamesHall编译后可以再调试目录(Debug-iphonesimulator)下看到libhellocpp.a和libcocos2dx.a还有include目录都正确复制过来了</li>
</ul>
<blockquote>
<p>&#x2F;Users&#x2F;linyehui&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;GamesHall-ezsoyplchjjurfeznsedhgwywbkr&#x2F;Build&#x2F;Products&#x2F;Debug-iphonesimulator</p>
</blockquote>
<h3 id="5-添加代码调用"><a href="#5-添加代码调用" class="headerlink" title="5. 添加代码调用"></a>5. 添加代码调用</h3><ul>
<li>添加后发现link失败，找了好多原因，最后有效的是这个：<br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/18959691/ios7-only-stdlibc-linking-issue">IOS7 (only) stdlibc++ linking issue</a></li>
<li>改完stdlib后又提示zlib相关的几个函数找不到<br>工程依赖加上libz.dylib</li>
</ul>
<h3 id="6-调用成功，独立成Static-Library没问题"><a href="#6-调用成功，独立成Static-Library没问题" class="headerlink" title="6. 调用成功，独立成Static Library没问题"></a>6. 调用成功，独立成Static Library没问题</h3><h3 id="7-尝试多个游戏一起加入进来"><a href="#7-尝试多个游戏一起加入进来" class="headerlink" title="7. 尝试多个游戏一起加入进来"></a>7. 尝试多个游戏一起加入进来</h3><ul>
<li><p>单个HelloCpp是OK的</p>
</li>
<li><p>两个一起加会编译失败但没有具体失败的项，只有Warning，很奇怪</p>
</li>
<li><p>两个分别成功加进去，并正确运行后，再把两个加到一起，可以运行，但是第二个游戏错乱了，还要再找下原因</p>
</li>
<li><p>第二个游戏不是乱了，而是显示了第一个游戏的场景；原因是：</p>
<p>  注册cocos2d::CCApplication用的是一个全局静态变量，而不是注册上去的，我们有两个游戏，其实有两个这个全局变量的实现，用来处理cocos的启动跟暂停；<br>  而且我们的runWithScene是在这个里面调用的，所以导致了，两个游戏启动的时候都调用到了同样的场景。</p>
</li>
<li><p>尝试自己runWithScene，看看能不能把两个游戏分开<br>CCApplication的之类全局自定义一个，然后runWitSenne拿到cocosView中来分别处理，可以做到，但是这个方案并不好，下面单独解释。</p>
</li>
</ul>
<h1 id="两个工程合在一起的问题"><a href="#两个工程合在一起的问题" class="headerlink" title="两个工程合在一起的问题"></a>两个工程合在一起的问题</h1><h3 id="结论："><a href="#结论：" class="headerlink" title="结论："></a>结论：</h3><blockquote>
<p>不要把两个独立的游戏座位Library整合在一个应用内。<br>技术上可以实现，但是Cocos架构不支持，勉强自己改来用的话出现莫名其妙问题的风险很大。</p>
</blockquote>
<h3 id="非要实现的细节和缺陷"><a href="#非要实现的细节和缺陷" class="headerlink" title="非要实现的细节和缺陷"></a>非要实现的细节和缺陷</h3><ol>
<li><p>Cocos本身的设计没有考虑这种一个进程多个游戏的架构，我们使用会有架构风险<br>比如cocos2d::CCApplication的事件注册并不是Add上去，而是定义一个全局变量来实现，这个设计本身就没考虑多个实例同时存在</p>
<p> &#x2F;&#x2F; cocos2d application instance<br> &#x2F;&#x2F; 两个游戏加到一个工程的时候只能保留一个，否则会从Cocos内部直接异常退出<br> &#x2F;&#x2F; 变量名不同也没用，因为实际起作用的是父类CCApplication的成员变量<br> &#x2F;&#x2F; static CCApplication * sm_pSharedApplication;<br><br><br> &#x2F;&#x2F;static CocosAppDelegate s_sharedApplication;<br> 解决的办法，是多个游戏只保留一个CCApplication之类的全局变量的定义。</p>
</li>
<li><p>本来应该每个游戏自己响应CCApplication事件并做出处理，现在这个点不能做了，架构上本身就有问题，和把游戏整个在一个Cocos实例下没有本质的区别，未知的问题还更多</p>
</li>
<li><p>Xcode对于这种多个Library依赖同一个Library的编译支持有时候会出错<br>会出现上面提到的：提示编译失败，但是没有列出具体失败的地方，如果这个时候把其中一个游戏工程删掉，错误的地方就能正确被提示</p>
</li>
</ol>
<h1 id="关于静态库对安装包大小的影响"><a href="#关于静态库对安装包大小的影响" class="headerlink" title="关于静态库对安装包大小的影响"></a>关于静态库对安装包大小的影响</h1><p>以下三个包，资源都是一样的，只是库文件上有差异</p>
<h3 id="只有大厅，不包含游戏库，-app大小235KB"><a href="#只有大厅，不包含游戏库，-app大小235KB" class="headerlink" title="只有大厅，不包含游戏库，.app大小235KB"></a>只有大厅，不包含游戏库，.app大小235KB</h3><p><img src="https://raw.githubusercontent.com/linyehui/cocos2dx-game-as-library/master/screenshot/just_hall.png" alt="just_hall.png"></p>
<h3 id="大厅-一个cocos2dx游戏Library，-app大小3-5MB"><a href="#大厅-一个cocos2dx游戏Library，-app大小3-5MB" class="headerlink" title="大厅+一个cocos2dx游戏Library，.app大小3.5MB"></a>大厅+一个cocos2dx游戏Library，.app大小3.5MB</h3><p><img src="https://raw.githubusercontent.com/linyehui/cocos2dx-game-as-library/master/screenshot/one_game.png" alt="one_game.png"></p>
<h3 id="大厅-两个cocos2dx游戏Library，-app大小3-2MB"><a href="#大厅-两个cocos2dx游戏Library，-app大小3-2MB" class="headerlink" title="大厅+两个cocos2dx游戏Library，.app大小3.2MB"></a>大厅+两个cocos2dx游戏Library，.app大小3.2MB</h3><p><img src="https://raw.githubusercontent.com/linyehui/cocos2dx-game-as-library/master/screenshot/two_games.png" alt="two_games.png"></p>
<p>科学吗？差不多是这个意思</p>
<h1 id="其他参考文章"><a href="#其他参考文章" class="headerlink" title="其他参考文章"></a>其他参考文章</h1><p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/beginor/archive/2012/04/20/2459244.html">iOS 静态类库项目的建立与使用</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-07-06-migrating-from-wikidot-to-jekyll/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-07-06-migrating-from-wikidot-to-jekyll/" class="post-title-link" itemprop="url">把Blog数据从Wikidot迁移到Jekyll</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><blockquote>
<p>把Wikidot的Blog数据迁移到Jekyll</p>
</blockquote>
<h3 id="目标分解："><a href="#目标分解：" class="headerlink" title="目标分解："></a>目标分解：</h3><ul>
<li>Blog原文从之前的Wiki格式转换成Markdown</li>
<li>保持原有的文章发布时间，标题，文章的Url，tag信息</li>
</ul>
<p><strong>PS.</strong>  </p>
<p>为什么把博客从Wikidot迁移出来？<br>为什么选择Github Pages + Jekyll 而不是Farbox或者其他？<br>这个先沉淀下，同时也用段时间验证下，过段时间再和大家分享。</p>
<h1 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h1><h2 id="基本情况介绍"><a href="#基本情况介绍" class="headerlink" title="基本情况介绍"></a>基本情况介绍</h2><ul>
<li>Wikidot支持Backup，但是备份出来的数据压缩包解压出来就是些纯文本，文件名是url名字，文件内容就是Wiki格式的文章内容，没有文章发布的时间，没有tag信息；</li>
<li>想拿到全的RSS，但试了半天RSS还是只导出了22篇文章，不知道怎么拿到老的数据RSS。</li>
</ul>
<h2 id="尝试-1：能不能直接使用-Jekyll-import"><a href="#尝试-1：能不能直接使用-Jekyll-import" class="headerlink" title="尝试 1：能不能直接使用 Jekyll-import"></a>尝试 1：能不能直接使用 Jekyll-import</h2><ul>
<li>我也想用，但是没找到直接对Wikidot的支持，对Wiki格式的支持也没有；</li>
<li>如果想从RSS导入的话，Wikidot导出的RSS又不全</li>
<li>无奈放弃</li>
</ul>
<h2 id="尝试-2：能不能曲线救国，先转成Wordpress再转"><a href="#尝试-2：能不能曲线救国，先转成Wordpress再转" class="headerlink" title="尝试 2：能不能曲线救国，先转成Wordpress再转"></a>尝试 2：能不能曲线救国，先转成Wordpress再转</h2><p>看了下，有位哥们脚本实现了：<a target="_blank" rel="noopener" href="https://github.com/vLj2/wikidot-to-markdown">wikidot-to-markdown</a>，但是他只是对格式的转换，这个代码我可以复用，但是……</p>
<h4 id="但是来了："><a href="#但是来了：" class="headerlink" title="但是来了："></a>但是来了：</h4><ul>
<li><p>前提是我得先有数据给他转换，从上面介绍Wikidot直接提供给我们的数据是不够的</p>
</li>
<li><p>我的目的是放到Jekyll上，也就是说我的文件头需要加上Jakyll的配置，这个我还得另外写个脚本来做</p>
</li>
<li><p>需求描述变成了：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 从Wikidot拿到所有文章的索引信息（Title，Url，tags，Date），和backup中的文件关联起来；</span><br><span class="line">2. 再处理下backup中的文件，加上文件头，把正文从Wiki转成Mardown</span><br></pre></td></tr></table></figure></li>
</ul>
<p>到此，问题分析的七七八八了，结论是我要写个脚本来做这个事情。</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="拿到WIkidot所有文章的索引"><a href="#拿到WIkidot所有文章的索引" class="headerlink" title="拿到WIkidot所有文章的索引"></a>拿到WIkidot所有文章的索引</h2><p>没能拿到全的RSS，但是全的索引还是可以拿到的，但是需要再wikidot下页面单独来做这个事情，比如我的：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.linyehui.com/misc:rss">http://www.linyehui.com/misc:rss</a></p>
</blockquote>
<p>这个Wikidot页面的源码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[module ListPages category=&quot;_default&quot; perPage=&quot;500&quot; date=&quot;@URL&quot; separate=&quot;false&quot; prependLine=&quot;||~ Page||~ Date created||~ Tags ||&quot;]]</span><br><span class="line">|| %%linked_title%% || %%date%% || %%tags%% ||</span><br><span class="line">[[/module]]</span><br></pre></td></tr></table></figure>

<h2 id="从Wikidot后台Backup并下载Zip包"><a href="#从Wikidot后台Backup并下载Zip包" class="headerlink" title="从Wikidot后台Backup并下载Zip包"></a>从Wikidot后台Backup并下载Zip包</h2><p>解压后的文件路径类似：</p>
<blockquote>
<p>~&#x2F;backup_linyehui_20140705_1759UTC&#x2F;source&#x2F;system_recent-changes.txt</p>
</blockquote>
<h2 id="写脚本"><a href="#写脚本" class="headerlink" title="写脚本"></a>写脚本</h2><p>有了上面两步，我就能拿到全索引，并用索引把backup目录下的文件关联起来了<br>对脚本感兴趣的可以直接看代码：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/linyehui/migrating-from-wikidot-to-jekyll">https://github.com/linyehui/migrating-from-wikidot-to-jekyll</a></p>
</blockquote>
<h3 id="这里说下脚本的使用方式："><a href="#这里说下脚本的使用方式：" class="headerlink" title="这里说下脚本的使用方式："></a>这里说下脚本的使用方式：</h3><ol>
<li><p>git clone 得到两个脚本文件 </p>
<blockquote>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/linyehui/migrating-from-wikidot-to-jekyll">https://github.com/linyehui/migrating-from-wikidot-to-jekyll</a></p>
</blockquote>
</li>
<li><p>从Wikidot 管理后台备份Blog，并下载下来，解压后得到source目录，放到脚本下的wikidot根目录（是的，我的脚本不对文件进行处理）</p>
</li>
<li><p>新建一个Wikidot页面，用于生成所有文章的RSS（我这文章数上限设置的是500，你可以自己调整），生成的RSS保存成rss.html，把文件复制到脚本下的wikidot根目录</p>
<p> 我新建了这个页面：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.linyehui.com/misc:rss">http://www.linyehui.com/misc:rss</a></p>
</blockquote>
<p> 页面代码如下（点击Edit就能编辑）：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[module ListPages category=&quot;_default&quot; perPage=&quot;500&quot; date=&quot;@URL&quot; separate=&quot;false&quot; prependLine=&quot;||~ Page||~ Date created||~ Tags ||&quot;]]</span><br><span class="line">|| %%linked_title%% || %%date%% || %%tags%% ||</span><br><span class="line">[[/module]]</span><br></pre></td></tr></table></figure></li>
<li><p>现在的脚本目录结构如下：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|----wikidot</span><br><span class="line">|    |-convert.py</span><br><span class="line">|    |-wikidot.py</span><br><span class="line">|    |-rss.html</span><br><span class="line">|    |-source</span><br><span class="line">|        |- xxxx-xxx1.txt</span><br><span class="line">|        |- xxxx-xxx2.txt</span><br></pre></td></tr></table></figure></li>
<li><p>执行convert.py，不带参数会使用默认的目录结构进行执行，执行后你就能再脚本旁边的.&#x2F;jekyll目录下得到你所需要的转换后的.markdown文件们</p>
</li>
<li><p>把.markdown文件全选，复制到github pages对应git目录下的_post目录，git commit，git push</p>
</li>
<li><p>迁移工作搞定。</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-07-09-convert-gbk-to-utf8-on-mac/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-07-09-convert-gbk-to-utf8-on-mac/" class="post-title-link" itemprop="url">Xcode下的中文乱码问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h1><p>绝大部分的中文乱码是因为文件编码不对导致的：</p>
<ol>
<li>使用了GBK的文件编码方式在Xcode下是无法识别的</li>
<li>老版本的Xcode对带BOOM头的UTF8文件编码也是无法识别的（我的Xcode 5.0.2已经支持带BOM头的UTF8文件了）</li>
</ol>
<p>出现上述情况一般都是因为跨平台共用文件导致的，Windows，Mac共同使用的代码文件会出现乱码的问题。</p>
<h1 id="最好的解决方案"><a href="#最好的解决方案" class="headerlink" title="最好的解决方案"></a>最好的解决方案</h1><p>Windows和Mac下统一使用UTF8带BOM头的文件编码格式。</p>
<h3 id="特别解释下"><a href="#特别解释下" class="headerlink" title="特别解释下"></a>特别解释下</h3><h4 id="以前是这样的："><a href="#以前是这样的：" class="headerlink" title="以前是这样的："></a>以前是这样的：</h4><p>UTF8不带BOM头的文件，在xcode和eclipse下显示正常，但Windows下会中文乱码；  </p>
<p>UTF8带BOM头的文件，Windows下显示正常，但Xcode和eclipse下会中文乱码；</p>
<h4 id="现在是这样的："><a href="#现在是这样的：" class="headerlink" title="现在是这样的："></a>现在是这样的：</h4><p>Xcode 5.0.2和ADT 22.3.0都已经支持显示带BOM头的UTF8格式。</p>
<h1 id="Mac下遇到这种乱码怎么解决"><a href="#Mac下遇到这种乱码怎么解决" class="headerlink" title="Mac下遇到这种乱码怎么解决"></a>Mac下遇到这种乱码怎么解决</h1><h2 id="方法一：使用Sublime的解决办法"><a href="#方法一：使用Sublime的解决办法" class="headerlink" title="方法一：使用Sublime的解决办法"></a>方法一：使用Sublime的解决办法</h2><p>Sublime Text 2下，使用Package Control 安装 ConvertToUTF8 这个插件：</p>
<ol>
<li>使用Sublime打开乱码文件，正常是可以自动识别出来是GBK还是GB2312等编码的</li>
<li>如果识别不出来，那么就手动选择下菜单File-》Reload With Encoding，选择GBK，应该也能正确显示中文了</li>
<li>正确显示中文后，就可以把文件保存成UTF8格式了，但是直接Save是不行的，保存之前必须先做一件事情：<blockquote>
<p>File -&gt; Set File Encoding to -&gt; UTF8</p>
</blockquote>
</li>
<li>保存文件</li>
</ol>
<h2 id="方法二：Xcode的File-inspector属性窗口"><a href="#方法二：Xcode的File-inspector属性窗口" class="headerlink" title="方法二：Xcode的File inspector属性窗口"></a>方法二：Xcode的File inspector属性窗口</h2><ol>
<li><p>在工程中打开乱码的文件，选择File inspector属性窗口</p>
</li>
<li><p>选择Text Encoding，比如我选择“GB 2313”（不对的话可以换着试试看）</p>
</li>
<li><p>弹出提示，选择“Reinterpret”，如果中文显示正确，就下一步，否则就再换个编码试试</p>
<blockquote>
<p>Do you want to convert the text to ‘Simplified Chinese (GB 2312)’?</p>
</blockquote>
<p> Choose ‘Convert’ if you want to change the contents of the file to be encoded as ‘Simplified Chinese (GB 2312)’.</p>
<blockquote>
</blockquote>
<p> Choose ‘Reinterpret’ if you believe the file has been opened with an incorrect encoding and you want to reopen it as ‘Simplified Chinese (GB 2312)’.</p>
</li>
<li><p>把成功显示中文后的文件保存成UTF8格式：</p>
</li>
</ol>
<p>再选择下Text Encoing-&gt;UTF8，这次出现的提示选择Convert</p>
<ol start="5">
<li>搞定</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-08-01-h264-encoders-other-than-ffmpeg-x264/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-08-01-h264-encoders-other-than-ffmpeg-x264/" class="post-title-link" itemprop="url">使用ffmpeg对H.264/AAC视频进行处理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-需求描述"><a href="#1-需求描述" class="headerlink" title="1. 需求描述"></a>1. 需求描述</h1><p>Android手机拍摄的视频在PC上查看，视觉效果是被旋转了90度的；  </p>
<p>于是我们想要使用ffmpeg对视频进行90度旋转，并要求保持视频的编码格式：AVC&#x2F;AAC；  </p>
<p>解决了这个问题后，还想用ffmpeg来进行更多的视频处理。</p>
<h2 id="1-1-细化下来的需求点"><a href="#1-1-细化下来的需求点" class="headerlink" title="1.1 细化下来的需求点"></a>1.1 细化下来的需求点</h2><ul>
<li>视频旋转后大小不变</li>
<li>视频的编码格式和音频的编码格式不变</li>
<li>视频旋转后还可以继续在Chrome等HTML5浏览器中直接播放</li>
</ul>
<h2 id="1-2-视频的编码格式"><a href="#1-2-视频的编码格式" class="headerlink" title="1.2 视频的编码格式"></a>1.2 视频的编码格式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">视频流信息</span><br><span class="line">+编码格式: AVC</span><br><span class="line">+视频码率: 1065 kbps</span><br><span class="line">+视频帧率：24 fps</span><br><span class="line">+分 辨 率: 640 x 480</span><br><span class="line">+显示比率: 1.333</span><br><span class="line"></span><br><span class="line">音频流信息</span><br><span class="line">+编码格式: A_AAC/MPEG4/LC</span><br><span class="line">+音频码率: 57 kbps</span><br><span class="line">+声 道 数: 2 channels</span><br><span class="line">+采 样 数: 44100 Hz</span><br><span class="line">+音频位数: 0 bits</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这里要提下为什么使用这个格式，因为<a target="_blank" rel="noopener" href="http://www.w3schools.com/html/html5_video.asp">HTML 5支持的视频格式就是这几个</a>，而其中最通用的就是上面这个：H.264&#x2F;AAC</p>
<h1 id="2-最后有用的命令行是这个："><a href="#2-最后有用的命令行是这个：" class="headerlink" title="2. 最后有用的命令行是这个："></a>2. 最后有用的命令行是这个：</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 视频转码成H.264，并旋转90度，音频格式保存不变</span></span><br><span class="line">ffmpeg -i test.mp4 -vcodec h264 -c:a copy -vf <span class="string">&quot;transpose=1&quot;</span> -strict -2 -y out.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去掉rotate属性</span></span><br><span class="line">ffmpeg -i test.mp4 -metadata:s:v rotate=<span class="string">&quot;0&quot;</span> -strict -2 -y r.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 裁剪视频</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 视频裁剪的宽高分别是(480,480)，裁剪视频的起始点是(0,0)</span></span><br><span class="line">ffmpeg -i test.mp4 -vcodec h264 -c:a copy -filter:v <span class="string">&quot;crop=480:480:0:0&quot;</span> -strict -2 -y ret.mp4</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="3-GPL的担忧和解决方案"><a href="#3-GPL的担忧和解决方案" class="headerlink" title="3. GPL的担忧和解决方案"></a>3. GPL的担忧和解决方案</h1><p>使用命令行已经解决了我们的问题了，但是如果我们先使用ffmpeg作为库整合到我们的产品中会不会有开源协议上的风险呢？  </p>
<p>我们使用的视频编码格式-vcodec 是h264，突然想到一个念头，如果我们的产品中使用了ffmpeg进行视频旋转，那么会不会导致我们的产品需要遵循GPL全部开源呢？因为好像H.264的开源协议是GPL的！  </p>
<p>其实上面这句话是有问题的，因为没有区分清楚H.264和x264的关系：  </p>
<blockquote>
<p>H.264是一种编码规范，而x264是H.264的一种实现，x264使用GPL进行开源。</p>
</blockquote>
<h2 id="3-1-真正的担忧是："><a href="#3-1-真正的担忧是：" class="headerlink" title="3.1 真正的担忧是："></a>3.1 真正的担忧是：</h2><blockquote>
<p>如果我们使用了ffmpeg来处理我们的视频，我们是否会因为使用了x264而导致产品必须遵循GPL进行开源</p>
</blockquote>
<h2 id="3-2-ffmpeg如果不使用x264能支持H-264编解码吗？不行"><a href="#3-2-ffmpeg如果不使用x264能支持H-264编解码吗？不行" class="headerlink" title="3.2 ffmpeg如果不使用x264能支持H.264编解码吗？不行"></a>3.2 ffmpeg如果不使用x264能支持H.264编解码吗？不行</h2><h4 id="ffmpeg的解码是LGPL的，编码是GPL的-x264"><a href="#ffmpeg的解码是LGPL的，编码是GPL的-x264" class="headerlink" title="ffmpeg的解码是LGPL的，编码是GPL的(x264)"></a>ffmpeg的解码是LGPL的，编码是GPL的(x264)</h4><blockquote>
<p>The ffmpeg H.264 decoder is LGPL. Only the encoders are GPL, and x264 does not provide a decoder.<br>It also has the advantage over Framewave and IPP of actually being usable.</p>
</blockquote>
<h4 id="这一部分参考了下面的文章："><a href="#这一部分参考了下面的文章：" class="headerlink" title="这一部分参考了下面的文章："></a>这一部分参考了下面的文章：</h4><p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/1968790/h264-encoders-other-than-ffmpeg-x264">H264 Encoders other than ffmpeg x264</a>  </p>
<p><a target="_blank" rel="noopener" href="http://ffmpeg-users.933282.n4.nabble.com/Does-using-H-264-with-ffmpeg-make-my-software-GPL-and-if-so-are-there-workarounds-td934364.html">Does using H.264 with ffmpeg make my software GPL and if so are there workarounds?</a>  </p>
<p><a target="_blank" rel="noopener" href="http://comments.gmane.org/gmane.comp.video.ffmpeg.libav.user/10274">Libav, licensing, h.264</a>  </p>
<p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/668494/free-open-h-264-video-decoding-libraries-non-gpl">Free&#x2F;Open h.264 video decoding libraries? (Non-GPL)</a>  </p>
<h2 id="3-3-如果视频格式使用H-264，又想对视频进行处理，应该怎么办？"><a href="#3-3-如果视频格式使用H-264，又想对视频进行处理，应该怎么办？" class="headerlink" title="3.3 如果视频格式使用H.264，又想对视频进行处理，应该怎么办？"></a>3.3 如果视频格式使用H.264，又想对视频进行处理，应该怎么办？</h2><h3 id="3-3-1-服务端使用"><a href="#3-3-1-服务端使用" class="headerlink" title="3.3.1 服务端使用"></a>3.3.1 服务端使用</h3><p>服务端使用ffmpeg进行视频处理，由于没有分发，不受GPL的限制，可以自由使用。  </p>
<h3 id="3-3-2-终端使用"><a href="#3-3-2-终端使用" class="headerlink" title="3.3.2 终端使用"></a>3.3.2 终端使用</h3><p>要对视频进行处理，就必然需要编码解码，而解码的话ffmpeg只能使用x264；  </p>
<p>使用了x264的ffmpeg必须遵循GPL进行软件分发，这对商业软件来说是个很大的门槛；  </p>
<h3 id="3-3-3-综合下来的解决方案"><a href="#3-3-3-综合下来的解决方案" class="headerlink" title="3.3.3 综合下来的解决方案"></a>3.3.3 综合下来的解决方案</h3><h4 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h4><p>客户端直接录制H.264视频，但不进行视频处理，视频处理交给服务端来做。</p>
<h4 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h4><p>客户端入职视频采用非H.264格式，录制后本地就可以使用ffmpeg进行些简单的处理，上传到服务器后再进行H.264的转码，转码后再提供给HTML5播放。</p>
<h4 id="方案三"><a href="#方案三" class="headerlink" title="方案三"></a>方案三</h4><p>客户端录制H.264视频，本地使用x264的商业授权进行分发。</p>
<h4 id="方案四"><a href="#方案四" class="headerlink" title="方案四"></a>方案四</h4><p>客户端录制H.264视频，本地使用x264以外的其他视频库来编码视频。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-07-09-jsoncpp-semantic-issue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-07-09-jsoncpp-semantic-issue/" class="post-title-link" itemprop="url">jsoncpp在Xcode下编译出现semantic issue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>Xcode 5.0.2下编译Cocos2d-x工程，工程中使用了jsoncpp-0.5.0，编译的时候出现这个问题，找了半天不知道怎么解决：</p>
<blockquote>
<p>semantic issue<br>Variable has incomplete type ‘Json::StyledWriter’</p>
</blockquote>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>升级jsoncpp-0.6.0后解决，我用的是这个版本:<a target="_blank" rel="noopener" href="https://github.com/rboulton/jsoncpp">github jsoncpp</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-08-21-adb-shell-vi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-08-21-adb-shell-vi/" class="post-title-link" itemprop="url">adb shell下使用vi修改hosts</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><h2 id="原始需求"><a href="#原始需求" class="headerlink" title="原始需求"></a>原始需求</h2><p>Android应用测试的时候经常需要修改&#x2F;system&#x2F;etc&#x2F;hosts，有这么几种常见方法：  </p>
<ul>
<li>1、 adb pull 拉取到PC上进行修改，修改后再 adb push 回手机（麻烦）</li>
<li>2、 直接用手机上的Root Explorer等工具进行编辑（默认的文本编辑很难操作）</li>
<li>3、 PC上直接使用adb shell vi命令（android系统默认是没有vi命令的）</li>
</ul>
<h2 id="落地需求"><a href="#落地需求" class="headerlink" title="落地需求"></a>落地需求</h2><p>adb shell vi这个方案无疑是操作起来最高效的，那怎样才能可以在adb shell下使用vi命令呢？</p>
<h1 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h1><h2 id="0-前提：你的手机已经ROOT过了"><a href="#0-前提：你的手机已经ROOT过了" class="headerlink" title="0. 前提：你的手机已经ROOT过了"></a>0. 前提：你的手机已经ROOT过了</h2><h2 id="1-手机上下载并安装BusyBox"><a href="#1-手机上下载并安装BusyBox" class="headerlink" title="1. 手机上下载并安装BusyBox"></a>1. 手机上下载并安装BusyBox</h2><ul>
<li>我用的是这个：<a target="_blank" rel="noopener" href="http://www.wandoujia.com/apps/stericson.busybox.donate">BusyBox工具箱 汉化版</a></li>
<li>我安装的版本是1.22.1</li>
<li>安装的时候直接安装到&#x2F;system&#x2F;bin，这样敲命令行的时候就不需要这么敲了：<blockquote>
<p>busybox vi</p>
</blockquote>
</li>
</ul>
<h2 id="2-adb-shell-vi"><a href="#2-adb-shell-vi" class="headerlink" title="2. adb shell vi"></a>2. adb shell vi</h2><h3 id="2-1-非Windows机器直接在终端上adb-shell就可以了，无缝使用"><a href="#2-1-非Windows机器直接在终端上adb-shell就可以了，无缝使用" class="headerlink" title="2.1 非Windows机器直接在终端上adb shell就可以了，无缝使用"></a>2.1 非Windows机器直接在终端上adb shell就可以了，无缝使用</h3><h3 id="2-2-Windows下的-adb-shell-vi"><a href="#2-2-Windows下的-adb-shell-vi" class="headerlink" title="2.2 Windows下的 adb shell vi"></a>2.2 Windows下的 adb shell vi</h3><ul>
<li>Windows下直接使用CDM连接后使用vi会出现乱码，解决的方案是使用：adbputty</li>
<li>从这里下载：<a target="_blank" rel="noopener" href="https://github.com/sztupy/adbputty/downloads">adb putty</a></li>
<li>putty配置：主机填写transport-usb ，连接类型选择Adb（对应5037端口）</li>
</ul>
<p>配置可以参考这个：<a target="_blank" rel="noopener" href="http://yesokay.herokuapp.com/2012-07-31-adbputty.html">adb putty</a></p>
<h2 id="3-vi-保存文件时提示：Read-only-file-system"><a href="#3-vi-保存文件时提示：Read-only-file-system" class="headerlink" title="3. vi 保存文件时提示：Read-only file system."></a>3. vi 保存文件时提示：Read-only file system.</h2><p>都是mount R&#x2F;W的问题，同一个问题两个解决方案：</p>
<h3 id="3-1-mount-R-x2F-W"><a href="#3-1-mount-R-x2F-W" class="headerlink" title="3.1 mount R&#x2F;W"></a>3.1 mount R&#x2F;W</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Simply change ro to rw and add the remount option</span><br><span class="line"># mount -o rw,remount /system</span><br><span class="line"></span><br><span class="line">Once you are done making changes, you should remount with the original readonly.</span><br><span class="line"># mount -o ro,remount /system</span><br></pre></td></tr></table></figure>

<h3 id="3-2-还有个比较鸡肋，但是偷懒的解决方案"><a href="#3-2-还有个比较鸡肋，但是偷懒的解决方案" class="headerlink" title="3.2 还有个比较鸡肋，但是偷懒的解决方案"></a>3.2 还有个比较鸡肋，但是偷懒的解决方案</h3><p>不记得命令行的时候可以使用下 :)</p>
<ol>
<li>使用Root Exporler等工具，点击Mount R&#x2F;W按钮</li>
<li>回到adb shell下操作，你会发现已经可以保存了</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-08-29-cross-platform-indent-style/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-08-29-cross-platform-indent-style/" class="post-title-link" itemprop="url">跨平台代码缩进</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>跨平台的代码，在各个平台下的代码显示都能正确对齐，中文不乱码</p>
<h1 id="规范内容"><a href="#规范内容" class="headerlink" title="规范内容"></a>规范内容</h1><h2 id="文件名"><a href="#文件名" class="headerlink" title="文件名"></a>文件名</h2><blockquote>
<p>文件名全小写加下划线</p>
</blockquote>
<h2 id="文件编码"><a href="#文件编码" class="headerlink" title="文件编码"></a>文件编码</h2><blockquote>
<p>文件编码使用 UTF-8 With BOM</p>
</blockquote>
<p>Eclipse,XCode 5.1+,VS2012都已经支持UTF-8 With BOM这个文件编码格式，中文不乱码</p>
<h2 id="TAB缩进"><a href="#TAB缩进" class="headerlink" title="TAB缩进"></a>TAB缩进</h2><blockquote>
<p>1.使用等宽字体  </p>
</blockquote>
<blockquote>
<p>2.使用空格替代TAB，一个TAB对应4个空格  </p>
</blockquote>
<blockquote>
<p>.  </p>
</blockquote>
<blockquote>
<p>PS. 主流IDE下都有选项可以将TAB自动转换为空格  </p>
</blockquote>
<h3 id="使用空格替代TAB，在三大主流IDE下如何配置"><a href="#使用空格替代TAB，在三大主流IDE下如何配置" class="headerlink" title="使用空格替代TAB，在三大主流IDE下如何配置"></a>使用空格替代TAB，在三大主流IDE下如何配置</h3><h5 id="Visual-Studio-2012"><a href="#Visual-Studio-2012" class="headerlink" title="Visual Studio 2012"></a>Visual Studio 2012</h5><p><img src="/media/files/2014/08/29/vs.png" alt="Visual Studio"></p>
<h5 id="ADT-Eclipse"><a href="#ADT-Eclipse" class="headerlink" title="ADT(Eclipse)"></a>ADT(Eclipse)</h5><p><img src="/media/files/2014/08/29/eclipse.png" alt="Eclipse"></p>
<h5 id="Xcode-5-1-1"><a href="#Xcode-5-1-1" class="headerlink" title="Xcode 5.1.1"></a>Xcode 5.1.1</h5><p><img src="/media/files/2014/08/29/xcode.jpg" alt="Xcode"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://linyehui.me/2022/05/17/2014/2014-09-27-clean-webview-cache-of-android-app/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="linyehui">
      <meta itemprop="description" content="HABIT IS POWER">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HABIT IS POWER">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/2014/2014-09-27-clean-webview-cache-of-android-app/" class="post-title-link" itemprop="url">Android下手动清除WebView缓存</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-17 15:49:14" itemprop="dateCreated datePublished" datetime="2022-05-17T15:49:14+08:00">2022-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>手动清除Android QQ中内嵌WebView缓存</p>
<h1 id="寻找解决方案"><a href="#寻找解决方案" class="headerlink" title="寻找解决方案"></a>寻找解决方案</h1><p><a target="_blank" rel="noopener" href="http://blog.csdn.net/moubenmao_jun/article/details/17078269">WebView Cache 缓存清除</a></p>
<h3 id="简单说，就是应用内的WebView缓存都会序列化在这里："><a href="#简单说，就是应用内的WebView缓存都会序列化在这里：" class="headerlink" title="简单说，就是应用内的WebView缓存都会序列化在这里："></a>简单说，就是应用内的WebView缓存都会序列化在这里：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/data/data/package_name/cache/</span><br><span class="line">/data/data/package_name/database/webview.db</span><br><span class="line">/data/data/package_name/database/webviewCache.db</span><br></pre></td></tr></table></figure>

<h1 id="手动删除缓存-操作步骤"><a href="#手动删除缓存-操作步骤" class="headerlink" title="手动删除缓存-操作步骤"></a>手动删除缓存-操作步骤</h1><ul>
<li>杀掉应用</li>
<li>去&#x2F;data&#x2F;data&#x2F;package_name&#x2F;目录下删除cache目录</li>
<li>去&#x2F;data&#x2F;data&#x2F;package_name&#x2F;database&#x2F;目录下删除所有webView前缀的文件</li>
<li>搞定</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">linyehui</p>
  <div class="site-description" itemprop="description">HABIT IS POWER</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">143</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">178</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">linyehui</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
